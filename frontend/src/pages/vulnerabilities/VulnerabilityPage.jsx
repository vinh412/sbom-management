import React from 'react';
import { Card } from 'antd';
import vulnerabilityApi from '../../api/vulnerability';
import { useLoaderData } from 'react-router-dom';

export async function loader({params}) {
  const vulnerability = await vulnerabilityApi.getVulnerabilityById(params.id);
  return { vulnerability };
}

const VulnerabilityPage = () => {
  // Replace with your vulnerability data
  const {vulnerability} = useLoaderData();

  const cardStyle = {
    width: '80%',
    margin: '20px auto',
    padding: '20px',
    boxShadow: '0 4px 8px rgba(0, 0, 0, 0.1)',
    borderRadius: '10px',
  };

  const titleStyle = {
    fontSize: '24px',
    fontWeight: 'bold',
    marginBottom: '10px',
  };

  const paragraphStyle = {
    fontSize: '16px',
    marginBottom: '10px',
  };

  const listStyle = {
    paddingLeft: '20px',
  };

  return (
    <Card title={vulnerability.title} style={cardStyle}>
      <p style={paragraphStyle}>CVE: {vulnerability.cve}</p>
      <p style={paragraphStyle}>CVSS Score: {vulnerability.cvssScore}</p>
      <p style={paragraphStyle}>CVSS Vector: {vulnerability.cvssVector}</p>
      <p style={paragraphStyle}>CWE: {vulnerability.cwe}</p>
      <p style={paragraphStyle}>Description: {vulnerability.description}</p>
      <p style={paragraphStyle}>References:</p>
      <ul style={listStyle}>
        {vulnerability.externalReferences.map((reference, index) => (
          <li key={index}>
            <a href={reference} target="_blank" rel="noopener noreferrer">
              {reference}
            </a>
          </li>
        ))}
      </ul>
    </Card>
  );
};

export default VulnerabilityPage;